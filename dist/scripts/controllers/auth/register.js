"use strict";angular.module("sbAdminApp").controller("RegisterCtrl",function($scope,Auth,$state){function cbUsername(res){var resVal=res.data;$scope.existUsername=resVal.exist,$scope.userForm.$valid=!1}function cbEmail(res){var resVal=res.data;$scope.existEmail=resVal.exist,$scope.userForm.$valid=!1}function cbSignup(res){var resVal=res.data;resVal.success?$state.go("login"):($scope.errflag=!0,$scope.errmsg=resVal.message)}$scope.errflag=!1,$scope.errmsg="",$scope.existEmail=!1,$scope.existUsername=!1,$scope.validEmail=function(user){user.emailId&&Auth.checkEmail(user.emailId).then(cbEmail)},$scope.validUsername=function(user){user.userName&&Auth.checkUsername(user.userName).then(cbUsername)},$scope.signup=function(user){!$scope.checked||$scope.existEmail||$scope.existUsername?$scope.licenseAgree=!0:Auth.register(user).then(cbSignup)}});